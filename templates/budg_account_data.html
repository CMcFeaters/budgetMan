{% extends "budg_layout.html" %}
{% block body %}
<script type="text/javascript">

    /* Generates all of the data for a particular cashflow when clicked if nothing exists
        else
        removes all inner html from ul
        
        */
    function show_cfData(cfID,accID, value,rRate,rType,endDate) {
        var list = document.getElementById("cf_"+cfID);
        //alert(list.innerHTML);

        if (list.innerHTML == "") {
            //fill in 

            list.innerHTML = '<li>Value: ' + value + '</li>'
                + ' </li><li>Every: ' + rRate.toString() + ' ' + rType.toString()
                + ' </li><li>End Date: ' + endDate.toString() + '</li>'
				+ "<sml><a href=\"{{ url_for('delete_a_thing',id=0,accID=0,name=0)}}\">delete</a></sml>".replace('/0-0_0','/'+cfID+"-"+accID+"_cashflow")
				+ " / <sml><a href=\"{{ url_for('cfBreakdown',id=0, i=0)}}\">breakdown</a></sml>".replace('/0-0','/'+cfID+"-0")
				+ " / <sml><a href=\"{{ url_for('edCashFlow',id=0)}}\">edit</a></sml>".replace('/0','/'+cfID);
                //+ ;
                
        }
        else {
            list.innerHTML="";
        }
    }

    function show_budgData(budgID,accID, value,recurType,recurRate) {
        var list = document.getElementById("budg_"+budgID);
        //alert(list.innerHTML);

        if (list.innerHTML == "") {

            list.innerHTML = '<li>Value: ' + value.toString() + '</li>'
                + ' </li><li>Every : ' + recurRate + ' ' + recurType.toString()+"'s</li>"
				+ "<sml><a href=\"{{ url_for('delete_a_thing',id=0,accID=0,name=0)}}\">delete</a></sml>".replace('/0-0_0','/'+budgID+"-"+accID+"_master")
				+ " / <sml><a href=\"{{ url_for('edBudget',id=0)}}\">edit</a></sml>".replace('/0','/'+budgID);	
				
                

        }
        else {
            list.innerHTML="";
        }
    }
	
    function show_expData(expID,accID,value,eDate) {
        var list = document.getElementById("exp_"+expID);
        //alert(list.innerHTML);

        if (list.innerHTML == "") {
            
            list.innerHTML = '<li>Value: ' + value + '</li>'
                + ' </li><li>Date: ' + eDate.toString() + '</li>'               
			    + "<sml><a href=\"{{ url_for('delete_a_thing',id=0,accID=0,name=0)}}\">delete</a></sml>".replace('/0-0_0','/'+expID+"-"+accID+"_expense")
			    + " / <sml><a href=\"{{ url_for('edExpense',id=0)}}\">edit</a></sml>".replace('/0','/'+expID);
        }
        else {
            list.innerHTML="";
        }
}

    function show_tfData(tfID, other_account, value, date, fromTo, accID) {
        var list = document.getElementById("tf_"+tfID);
        //display positive or negative values depending on data
		if (fromTo=="To: "){
		
			value=-value;
			}
        if (list.innerHTML == "") {
            
            list.innerHTML = '<li>Value: ' + value + '</li>'
                + ' </li><li>'+fromTo+other_account + '</li>'
				+ ' </li><li>Date: ' + date.toString() + '</li>'
			    + "<sml><a href=\"{{ url_for('delete_a_thing',id=0,accID=0,name=0)}}\">delete</a></sml>".replace('/0-0_0','/'+tfID+"-"+accID+"_transfer")
			    + " / <sml><a href=\"{{ url_for('edTransfer',id=0)}}\">edit</a></sml>".replace('/0','/'+tfID);
        }
        else {
            list.innerHTML="";
        }
}
</script>
 

<fieldset><center><a href="{{ url_for('welcome') }}">Home</a> </center></fieldset>
<!--ADD Select Account-->
    <form name=accountSelect action="{{ url_for('displayAccount',acData='something') }}" method=POST >
    <fieldset >
    <legend>Select an account</legend>
    <dt>Account: 
    <select name="account"><dl>
    {% for account in ddList %}
    	<option value={{account.id}}>{{account.title}}</option>
    {% endfor %}
    </select>
    <br>
    <input type=submit value="Submit" name="Submit">
    </fieldset>
    </form>

<!--Display Account Data-->
    <fieldset>
    <legend>{{acData.title}} Data</legend>

    <ul class=results>
    <li><h2>{{acData.title}}</h2>
    Value: {{acData.getDateValue()}}
    <br>
    As of: {{tDate}}
    </ul>

	<!--Display Cashflow Data-->
	CashFlows:<br>
        {% for cf in cfData %}
        ><a href="javascript:show_cfData('{{cf.id}}','{{cf.account_id}}','{{cf.value}}','{{cf.recurRate}}','{{cf.recurType}}','{{cf.recurEnd.date()}}');">{{cf.title}}</a><br>
        <ul id="cf_{{cf.id}}"></ul>

        {% else %}
            <em>Nothing to report chief</em></li><br>

        {% endfor %}

<!--Display Budget Data-->
    Budget:<br>
        {% for budg in budgData %}
        ><a href="javascript:show_budgData('{{budg.id}}','{{budg.account_id}}','{{budg.value}}','{{budg.recurType}}','{{budg.recurRate}}');">{{budg.title}}</a><br>
        <ul id="budg_{{budg.id}}"></ul>

        {% else %}
            <em>Nothing to report chief</em></li><br>

        {% endfor %}
		
<!--Display Expenses Data-->
    Expenses:<br>
    {% for exp in expData %}
    ><a href="javascript:show_expData('{{exp.id}}','{{exp.account_id}}','{{exp.value}}','{{exp.date.date()}}');">{{exp.title}}</a><br>
    <ul id="exp_{{exp.id}}"></ul>

    {% else %}
        <em>Nothing to report chief</em></li><br>

    {% endfor %}

<!--Display Transfer Data-->
 Transfers in:<br>
    {% for tf in tf_in %}
		><a href="javascript:show_tfData('{{tf.id}}','{{tf.f_account.title}}','{{tf.value}}','{{tf.date}}','From: ', '{{acData.id}}');">{{tf.title}}</a><br>
		<ul id="tf_{{tf.id}}"></ul>

    {% else %}
        <em>Nothing to report chief</em></li><br>

    {% endfor %}

 Transfers out:<br>
    {% for tf in tf_out %}
		><a href="javascript:show_tfData('{{tf.id}}','{{tf.t_account.title}}','{{tf.value}}','{{tf.date}}','To: ', '{{acData.id}}');">{{tf.title}}</a><br>
		<ul id="tf_{{tf.id}}"></ul>

    {% else %}
        <em>Nothing to report chief</em></li><br>

    {% endfor %}	

</fieldset>

{% endblock %} 